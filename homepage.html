<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style1.css">
  <title>BiteBuzz</title>
</head>
<body>
  <div class="sidebar">
    <h1 class="logo1">BiteBuzz</h1>
    <div class="sidebar-menus">
      <a href="homepage.html" class="active"><ion-icon name="storefront-outline"></ion-icon>Home</a>
      <a href="menu.html"><ion-icon name="menu-outline"></ion-icon>Menu</a>
      <a href="order-confirmation.html"><ion-icon name="receipt-outline"></ion-icon>Order</a>
      <a href="about-us.html"><ion-icon name="information-circle-outline"></ion-icon>About Us</a>
      <a href="contact-us.html"><ion-icon name="chatbubbles-outline"></ion-icon>Contact Us</a>
      <a href="feedback.html"><ion-icon name="chatbox-ellipses-outline"></ion-icon>Feedback</a>
    </div>
    <div class="sidebar-logout">
      <a href="#"><ion-icon name="log-out-outline"></ion-icon>Logout</a>
    </div>  
  </div>

  <!--main-->
  <div class="main">
    <!--main navbar-->
    <div class="main-navbar">
      <ion-icon class="menu-toggle" name="menu-outline"></ion-icon>
      <div class="search">
        <input type="text" placeholder="Search Restaurants...." id="search-input" autocomplete="off" required>
        <button class="search-btn">Search</button>
      </div>  
      <div class="profile">
        <a class="cart" href="shopping-cart.html">
          <ion-icon name="cart-outline"></ion-icon>
          <span class="cart-count" id="cart-count">0</span>
        </a>
        <a class="user" href="user-profile.html"><ion-icon name="person-outline"></ion-icon></a>
      </div>
    </div>         

    <!--main highlight-->
    <div class="main-highlight">
      <div class="main-header">
        <h2 class="main-title">Recommendations</h2>
      </div>
      <!--highlight menu-->
      <div class="highlight-wrapper">
        <div class="highlight-card">
          <img class="highlight-img" src="images1/ic-paradise/coconut-ic.jpeg">
          <div class="highlight-desc">
            <h4>Coconut Ice Cream</h4>
            <p>Rs.90</p>
          </div>
        </div>
        <div class="highlight-card">
          <img class="highlight-img" src="images1/puzzles/cold-coffee.jpeg">
          <div class="highlight-desc">
            <h4>Cold Coffee</h4>
            <p>Rs.120</p>
          </div>
        </div>
        <div class="highlight-card">
          <img class="highlight-img" src="images1/niyaz/chicken-biryani.jpeg">
          <div class="highlight-desc">
            <h4>Chicken Biryani</h4>
            <p>Rs.270</p>
          </div>
        </div>
        <div class="highlight-card">
          <img class="highlight-img" src="images1/drnk-lab/bbq-chicken-pizza.jpeg">
          <div class="highlight-desc">
            <h4>Barbeque Chicken Pizza</h4>
            <p>Rs.349</p>
          </div>
        </div>
      </div>
    </div> 
    <!--main menu/order-->
    <div class="main-menus">
      <div class="main-filter">
        <div>
          <h2 class="main-title">Menu <br>Category</h2>
        </div>
        <div class="filter-wrapper">
          <a href="starters-menu.html" class="menu-link">
          <div class="filter-card">
            <div class="filter-icon">
              <ion-icon name="restaurant-outline"></ion-icon>
            </div>
            <p>Starters</p>
          </div>  
          </a>
          <a href="burger-menu.html" class="menu-link">
          <div class="filter-card">
            <div class="filter-icon">
              <ion-icon name="fast-food-outline"></ion-icon>
            </div>
            <p>Burger</p>
          </div>
          </a>
          <a href="pizza-menu.html" class="menu-link">
          <div class="filter-card">
            <div class="filter-icon">
              <ion-icon name="pizza-outline"></ion-icon>
            </div>
            <p>Pizza</p>
          </div>
          </a>
          <a href="juice-menu.html" class="menu-link">
          <div class="filter-card">
            <div class="filter-icon">
              <ion-icon name="wine-outline"></ion-icon>
            </div>
            <p>Juice</p>
          </div>
          </a>
          <a href="dessert-menu.html" class="menu-link">
          <div class="filter-card">
            <div class="filter-icon">
              <ion-icon name="ice-cream-outline"></ion-icon>
            </div>
            <p>Desserts</p>
          </div>
          </a>
          <a href="tea-menu.html" class="menu-link">
          <div class="filter-card">
            <div class="filter-icon">
              <ion-icon name="cafe-outline"></ion-icon>
            </div>
            <p>Coffee</p>
          </div>
          </a>
          <a href="seafood-menu.html" class="menu-link">
          <div class="filter-card">
            <div class="filter-icon">
              <ion-icon name="fish-outline"></ion-icon>
            </div>
            <p>Seafood</p>
          </div>
          </a>
          <a href="biryani-menu.html" class="menu-link">
          <div class="filter-card">
            <div class="filter-icon">
              <ion-icon name="restaurant-outline"></ion-icon>
            </div>
            <p>Biryani</p>
          </div>
          </a>
        </div>
      </div>

      <!-- Restaurant Section -->
      <hr class="divider">     
      <div class="restaurant-section">
        <h2 class="main-title">Choose a Restaurant</h2>
        <p id="no-results-message" style="display: none; text-align: center; color: red;">No results found</p>
        <div class="restaurant-wrapper" id="restaurant-list"></div>
      </div>
    </div> 
  </div>
  <!-- Logout Confirmation Modal -->
  <div id="logout-modal" class="modal">
    <div class="modal-content">
      <h3>Are you sure you want to logout?</h3>
      <div class="modal-actions">
        <button id="logout-cancel" class="modal-btn">Cancel</button>
        <button id="logout-yes" class="modal-btn">Logout</button>
      </div>
    </div>
  </div>
  <script>   
    document.getElementById('logout-yes').addEventListener('click', function() {
    // Redirect to the login page or perform logout action
      showAlert("üëãYou have been logged out successfully.", "success");
      setTimeout( function() {
        window.location.href = 'login.html';
      }, 1500);
    });
    document.getElementById('logout-cancel').addEventListener('click', function() {
      // Close the modal
      document.getElementById('logout-modal').style.display = 'none';
    });
    document.querySelector('.sidebar-logout a').addEventListener('click', function(event) {
      event.preventDefault(); // Prevent default link behavior
      document.getElementById('logout-modal').style.display = 'flex'; // Show the modal
    });

   document.getElementById("search-input").addEventListener("input", function () {
    let searchQuery = this.value.toLowerCase().trim();
    let restaurantList = document.getElementById("restaurant-list"); // Restaurant container
    let restaurantCards = Array.from(document.querySelectorAll(".restaurant-card")); // Convert NodeList to array
    let noResultsMessage = document.getElementById("no-results-message"); // Reference the message element

    let matchedCards = [];
    
    restaurantCards.forEach(card => {
        let restaurantName = card.getAttribute("data-restaurant").toLowerCase();
        
        if (restaurantName.includes(searchQuery)) {
            card.style.display = "flex"; // Ensure it's visible
            matchedCards.push(card); // Store matching cards
        } else {
            card.style.display = "none"; // Hide non-matching restaurants
        }
    });

    // Reorder matched results to appear at the top
    restaurantList.innerHTML = ""; // Clear the container
    matchedCards.forEach(card => restaurantList.appendChild(card)); // Add matching ones first

    // Show or hide "No results found" message
    if (matchedCards.length === 0) {
        noResultsMessage.style.display = "block"; // Show message when no matches
    } else {
        noResultsMessage.style.display = "none"; // Hide message when matches exist
    }
   });

   // --- Alert function ---
    function showAlert(message, type) {
      document.querySelectorAll('.alert').forEach(el => el.remove());
      const alertBox = document.createElement("div");
      alertBox.classList.add("alert", type);
      alertBox.textContent = message;
      document.body.appendChild(alertBox);
      setTimeout(() => {
        alertBox.remove();
      }, 3000);
    }

    
    document.addEventListener('DOMContentLoaded', function() {
      fetch('admin/admin_get_restaurants.php')
        .then(response => response.json())
        .then(result => {
          if (!result.success) return;
          const data = result.data;
          const container = document.getElementById('restaurant-list');
          container.innerHTML = '';
          data.forEach(r => {
            container.innerHTML += `
              <a href="menu.html?restaurant_id=${r.id}" class="restaurant-link">
                <div class="restaurant-card" data-restaurant="${r.name}">
                  <img src="${r.image_url}" alt="${r.name}">
                  <div class="restaurant-info">
                    <h4>${r.name}</h4>
                    <p class="rating">‚≠ê ${r.rating}/5</p>
                    <p class="cuisine">Cuisine: ${r.cuisine}</p>
                    <p class="price-range">Price Range: ${r.price_range}</p>
                    <p class="reviews">${r.review_count} Reviews</p>
                    <div class="reviews">
                      <p>${r.review_1 || ''}</p>
                      <p>${r.review_2 || ''}</p>
                      <p>${r.review_3 || ''}</p>
                    </div>
                  </div>
                </div>
              </a>
            `;
          });
        });
    });

   
  
  </script>
  
  <script src="script1.js"></script>
  <script src="logout1.js"></script>
</body>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</html>